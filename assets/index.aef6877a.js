var m4=Object.defineProperty,h4=Object.defineProperties;var E4=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var Q=(r,e,n)=>e in r?m4(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,l=(r,e)=>{for(var n in e||(e={}))J.call(e,n)&&Q(r,n,e[n]);if(R)for(var n of R(e))K.call(e,n)&&Q(r,n,e[n]);return r},C=(r,e)=>h4(r,E4(e));var _=(r,e)=>{var n={};for(var t in r)J.call(r,t)&&e.indexOf(t)<0&&(n[t]=r[t]);if(r!=null&&R)for(var t of R(r))e.indexOf(t)<0&&K.call(r,t)&&(n[t]=r[t]);return n};import{j as Y,r as g,L as x,u as H,a as C4,b as Z,c as g4,R as B4,d as L,e as F4,B as v4}from"./vendor.221b0143.js";const D4=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}};D4();const u=Y.exports.jsx,c=Y.exports.jsxs,b4=()=>u("a",{href:"https://github.com/WuBanga/DnDr/issues",children:u("svg",{width:40,height:40,xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",clipRule:"evenodd",viewBox:"0 0 136 133",children:u("path",{fill:"#fff",d:"M67.866.003C30.386.003-.001 30.39-.001 67.878c0 29.987 19.446 55.425 46.417 64.404 3.396.62 4.633-1.475 4.633-3.275 0-1.609-.058-5.88-.091-11.542-18.88 4.1-22.863-9.1-22.863-9.1-3.087-7.842-7.537-9.929-7.537-9.929-6.163-4.208.466-4.125.466-4.125 6.813.48 10.396 6.996 10.396 6.996 6.054 10.37 15.888 7.375 19.754 5.637.617-4.383 2.367-7.375 4.309-9.07-15.071-1.713-30.917-7.538-30.917-33.546 0-7.409 2.646-13.467 6.987-18.213-.7-1.717-3.029-8.617.663-17.962 0 0 5.7-1.825 18.667 6.958a64.833 64.833 0 0116.991-2.283c5.763.025 11.571.775 16.992 2.283 12.958-8.783 18.646-6.958 18.646-6.958 3.704 9.345 1.375 16.245.675 17.962 4.35 4.746 6.979 10.804 6.979 18.213 0 26.075-15.87 31.812-30.992 33.491 2.438 2.096 4.609 6.238 4.609 12.571 0 9.071-.084 16.392-.084 18.617 0 1.816 1.221 3.929 4.667 3.266 26.95-8.995 46.38-34.416 46.38-64.395 0-37.488-30.392-67.875-67.88-67.875"})})}),m={SET:"set",TOGGLE_USED:"toggleUsed",RESET_USED:"resetUsed",ADD_PREPARED:"addPrepared",DELETE_PREPARED:"deletePrepared",UPDATE_HITS:"updateHits",UPDATE_EXTRA_HITS:"updateExtraHits",UPDATE_PLATINUM:"updatePlatinum",UPDATE_GOLD:"updateGold",UPDATE_ELECTRUM:"updateElectrum",UPDATE_SILVER:"updateSilver",UPDATE_COPPER:"updateCopper",UPDATE_EXPERIENCE:"updateExperience",UPDATE_LEVEL:"updateLevel",UPDATE_COMMENT:"updateComment"},f4=(r,e)=>{switch(e.type){case m.SET:return e.character;case m.ADD_PREPARED:return M4(r,e.spellId);case m.DELETE_PREPARED:return k4(r,e.spellIndex);case m.TOGGLE_USED:return R4(r,e.spellIndex);case m.RESET_USED:return U4(r);case m.UPDATE_HITS:return w4(r,e.hits);case m.UPDATE_EXTRA_HITS:return L4(r,e.extraHits);case m.UPDATE_PLATINUM:return A4(r,e.platinum);case m.UPDATE_GOLD:return N4(r,e.gold);case m.UPDATE_ELECTRUM:return P4(r,e.electrum);case m.UPDATE_ELECTRUM:return S4(r,e.silver);case m.UPDATE_ELECTRUM:return T4(r,e.copper);case m.UPDATE_EXPERIENCE:return x4(r,e.experience);case m.UPDATE_LEVEL:return _4(r,e.level);case m.UPDATE_COMMENT:return y4(r,e.comment);default:throw new Error(`Unknown action type ${e.type}`)}},y4=(r,e)=>C(l({},r),{comment:e}),_4=(r,e)=>C(l({},r),{level:e}),x4=(r,e)=>C(l({},r),{experience:e}),A4=(r,e)=>C(l({},r),{platinum:e}),N4=(r,e)=>C(l({},r),{gold:e}),P4=(r,e)=>C(l({},r),{electrum:e}),S4=(r,e)=>C(l({},r),{silver:e}),T4=(r,e)=>C(l({},r),{copper:e}),L4=(r,e)=>C(l({},r),{extraHits:e}),w4=(r,e)=>C(l({},r),{hits:e}),M4=(r,e)=>C(l({},r),{preparedSpells:r.preparedSpells.concat({id:e,used:!1})}),k4=(r,e)=>C(l({},r),{preparedSpells:r.preparedSpells.slice(0,e).concat(r.preparedSpells.slice(e+1))}),U4=r=>C(l({},r),{preparedSpells:r.preparedSpells.map(e=>C(l({},e),{used:!1}))}),R4=(r,e)=>C(l({},r),{preparedSpells:r.preparedSpells.map((n,t)=>t===e?C(l({},n),{used:!n.used}):n)}),G=g.exports.createContext(),u4="characters",I4=r=>{const{children:e}=r,[n,t]=g.exports.useState([]),[a,o]=g.exports.useState(!0);return g.exports.useEffect(()=>{setTimeout(()=>{const s=localStorage.getItem(u4);s&&t(JSON.parse(s)),o(!1)},2e3)},[]),g.exports.useEffect(()=>{a||localStorage.setItem(u4,JSON.stringify(n))},[n,a]),u(G.Provider,{value:{characters:n,isLoading:a,setCharacters:t},children:e})},e4=()=>{const r=g.exports.useContext(G);if(r===void 0)throw new Error("useCharacters \u0434\u043E\u043B\u0436\u0435\u043D \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C\u0441\u044F \u0432\u043D\u0443\u0442\u0440\u0438 CharactersProvider");const e=t=>{r.setCharacters(a=>[t,...a])},n=t=>{r.setCharacters(a=>a.filter(o=>o.id!==t))};return{characters:r.characters,isLoading:r.isLoading,addCharacter:e,deleteCharacter:n}},r4=r=>{const e=g.exports.useContext(G);if(e===void 0)throw new Error("useCharacter \u0434\u043E\u043B\u0436\u0435\u043D \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C\u0441\u044F \u0432\u043D\u0443\u0442\u0440\u0438 CharactersProvider");const{characters:n,isLoading:t,setCharacters:a}=e;return{character:n.find(i=>i.id===r),isLoading:t,dispatch:i=>{a(d=>d.map(B=>B.id===r?f4(B,i):B))}}},q4=r=>{const{rules:e}=r,n=a=>{const o={};let s=!1;for(const i of Object.keys(e)){const d=t(i,a[i]);d!==void 0&&(o[i]=d,s=!0)}return s?o:!0},t=(a,o)=>{const s=e[a];if(!!s)for(const i of s){if(i.validate)return i.validate(o)?void 0:i.errorMessage;if(!i.type)throw new Error("Rule type is not provided");if(!t4[i.type])throw new Error(`Unknown rule type: ${i.type}`);if(!t4[i.type](o))return i.errorMessage}};return{getErrorMessage:t,validate:n}},t4={required:r=>!(r===void 0||r==="")},$4=/^[\wа-яА-Я,\s]*$/,O4=/^\d*$/,n4=r=>{const{type:e,onChange:n}=r,t=o=>{let s=o.target.value;!s.match($4)||n(s.trimStart())},a=o=>{let s=o.target.value;!s.match(O4)||n(s!==""?Number(s):void 0)};switch(e){case"text":return t;case"number":return a;default:throw new Error(`Unexpected type: ${e}`)}},H4=()=>u("p",{style:{color:"var(--red-color)"},children:"*"});const v=r=>{const d=r,{type:e="button",className:n,as:t,color:a}=d,o=_(d,["type","className","as","color"]),s=["button"];let i="button";switch(a){case"red":s.push("button--red");break;case"green":s.push("button--green");break}return t!==void 0&&(i=t),n&&s.push(n),u(i,l({className:s.join(" "),type:e},o))},a4=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{width:"100%"},children:u("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 12H6"})}),j=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{width:"100%"},children:u("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})});const A=r=>{const d=r,{icon:e,className:n,as:t,size:a}=d,o=_(d,["icon","className","as","size"]),s=["icon-button"];let i="button";switch(a){case"large":s.push("icon-button--large");break;case"medium":s.push("icon-button--medium");break;default:s.push("icon-button--small");break}return n&&s.push(n),t!==void 0&&(i=t),u(i,C(l({type:"button"},o),{className:s.join(" "),children:e}))};const I=r=>{const a=r,{left:e,right:n}=a,t=_(a,["left","right"]);return c("div",{className:"input-container",children:[e,u("input",l({className:"input focusable",autoComplete:"off"},t)),n]})};const N=r=>{const{children:e}=r;return u("ul",{className:"list",children:e})},P=r=>{const{left:e,right:n,children:t}=r;return c("li",{className:"list-item",children:[e,u("div",{className:"list-text",children:t}),n]})},G4=r=>{const{cantrips:e=[],setCharacter:n}=r,[t,a]=g.exports.useState(""),o=()=>{t.length!==0&&(i(e.concat(t)),a(""))},s=d=>{i(e.slice(0,d).concat(e.slice(d+1)))},i=d=>{n(B=>C(l({},B),{cantrips:d}))};return c("div",{className:"list-add",children:[u("label",{htmlFor:"cantrips",children:"\u0417\u0430\u0433\u043E\u0432\u043E\u0440\u044B:"}),u(I,{type:"text",name:"cantrips",value:t,onChange:d=>a(d.target.value),right:u(A,{icon:u(j,{}),onClick:o})}),u(N,{children:e.map((d,B)=>u(P,{right:u(A,{icon:u(a4,{}),onClick:w=>s(B)}),children:d},d))})]})};const s4=r=>{const{children:e}=r;return u("div",{className:"form-control",children:e})};const j4=r=>u("p",l({className:"error"},r));const X=r=>u("label",l({className:"label"},r)),E=r=>{const o=r,{name:e,label:n,error:t}=o,a=_(o,["name","label","error"]);return c(s4,{children:[u(X,{htmlFor:e,children:n}),u(I,l({name:e},a)),t?u(j4,{children:t}):null]})},l4=()=>window.crypto.randomUUID();const X4=r=>{const{spells:e=[],setCharacter:n}=r,[t,a]=g.exports.useState(""),o=()=>{t.length!==0&&(i(e.concat({id:l4(),name:t})),a(""))},s=d=>{i(e.filter(B=>B.id!==d))},i=d=>{n(B=>C(l({},B),{spells:d,preparedSpells:[]}))};return c("div",{className:"list-add",children:[u("label",{htmlFor:"spells",children:"\u0417\u0430\u043A\u043B\u0438\u043D\u0430\u043D\u0438\u044F:"}),u(I,{type:"text",name:"spells",value:t,onChange:d=>a(d.target.value),right:u(A,{icon:u(j,{}),onClick:o})}),u(N,{children:e.map(d=>u(P,{right:u(A,{icon:u(a4,{}),onClick:B=>s(d.id)}),children:d.name},d.id))})]})};const o4=r=>u("textarea",l({className:"text-area focusable"},r)),V4=r=>{const{name:e,value:n,onChange:t,label:a}=r;return c(s4,{children:[u(X,{htmlFor:e,children:a}),u(o4,{name:e,value:n,onChange:t})]})};const c4={name:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u0418\u043C\u044F" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],race:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u0420\u0430\u0441\u0430" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],class:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u041A\u043B\u0430\u0441\u0441" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],worldview:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u041C\u0443\u0434\u0440\u043E\u0441\u0442\u044C" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],languages:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u042F\u0437\u044B\u043A\u0438" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],prehistory:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u041F\u0440\u0435\u0434\u044B\u0441\u0442\u043E\u0440\u0438\u044F" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],savingThrows:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u0421\u043F\u0430\u0441\u0431\u0440\u043E\u0441\u043A\u0438" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],speed:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],strength:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u0421\u0438\u043B\u0430" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],wisdom:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u041C\u0443\u0434\u0440\u043E\u0441\u0442\u044C" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],dexterity:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u041B\u043E\u0432\u043A\u043E\u0441\u0442\u044C" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],intelligence:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u0418\u043D\u0442\u0435\u043B\u043B\u0435\u043A\u0442" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],charisma:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u0425\u0430\u0440\u0438\u0437\u043C\u0430" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],constitution:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u0422\u0435\u043B\u043E\u0441\u043B\u043E\u0436\u0435\u043D\u0438\u0435" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],hits:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u0425\u0438\u0442\u044B" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],skillBonus:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u0411\u043E\u043D\u0443\u0441 \u043C\u0430\u0441\u0442\u0435\u0440\u0441\u0442\u0432\u0430" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],platinum:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u041F\u043B\u0430\u0442\u0438\u043D\u0430" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],gold:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u0417\u043E\u043B\u043E\u0442\u043E" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],electrum:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u042D\u043B\u0435\u043A\u0442\u0440\u0443\u043C" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],silver:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u0421\u0435\u0440\u0435\u0431\u0440\u043E" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],copper:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u041C\u0435\u0434\u044C" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],experience:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u041E\u043F\u044B\u0442" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],level:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u0423\u0440\u043E\u0432\u0435\u043D\u044C" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}],extraHits:[{type:"required",errorMessage:'\u041F\u043E\u043B\u0435 "\u0414\u043E\u043F.\u0445\u0438\u0442\u044B" \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C'}]},W4={name:"",race:"",class:"",worldview:"",languages:"",prehistory:"",savingThrows:"",skills:"",equipment:"",spells:[],preparedSpells:[],cantrips:[],strength:0,wisdom:0,dexterity:0,intelligence:0,charisma:0,hits:8,skillBonus:0,platinum:0,gold:10,electrum:0,silver:0,copper:0,experience:0,level:1,extraHits:0,speed:30,constitution:1,comment:""},i4=r=>{const{initial:e,onSubmit:n}=r,[t,a]=g.exports.useState(e!=null?e:W4),[o,s]=g.exports.useState({}),[i,d]=g.exports.useState(!1),{validate:B}=q4({rules:c4}),w=b=>{b.preventDefault();const F=B(t);if(F!==!0){s(F);return}d(!0),s({}),n(t)},q=(b,F)=>{a(y=>C(l({},y),{[b]:F}))},h=b=>{var k;const M=b,{name:F,label:y,type:$="text"}=M,O=_(M,["name","label","type"]);return l({name:F,label:((k=c4[F])==null?void 0:k.some(T=>T.type==="required"))?c(g.exports.Fragment,{children:[y,u(H4,{})]}):y,value:t[F]===void 0?"":t[F],onChange:n4({type:$,onChange:T=>q(F,T)}),error:o[F]},O)};return c("form",{className:"character-editor",onSubmit:w,children:[c("section",{className:"section",children:[u("h1",{children:"\u0411\u0430\u0437\u043E\u0432\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F"}),u(E,l({},h({name:"name",label:"\u0418\u043C\u044F"}))),u(E,l({},h({name:"race",label:"\u0420\u0430\u0441\u0430"}))),u(E,l({},h({name:"class",label:"\u041A\u043B\u0430\u0441\u0441"}))),u(E,l({},h({name:"speed",label:"\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C",type:"number",min:0}))),u(E,l({},h({name:"worldview",label:"\u041C\u0438\u0440\u043E\u0432\u043E\u0437\u0437\u0440\u0435\u043D\u0438\u0435"}))),u(E,l({},h({name:"languages",label:"\u042F\u0437\u044B\u043A\u0438"}))),u(E,l({},h({name:"prehistory",label:"\u041F\u0440\u0435\u0434\u044B\u0441\u0442\u043E\u0440\u0438\u044F"})))]}),c("section",{className:"section",children:[u("h1",{children:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438"}),u(E,l({},h({name:"strength",label:"\u0421\u0438\u043B\u0430",type:"number",min:0}))),u(E,l({},h({name:"wisdom",label:"\u041C\u0443\u0434\u0440\u043E\u0441\u0442\u044C",type:"number",min:0}))),u(E,l({},h({name:"dexterity",label:"\u041B\u043E\u0432\u043A\u043E\u0441\u0442\u044C",type:"number",min:0}))),u(E,l({},h({name:"intelligence",label:"\u0418\u043D\u0442\u0435\u043B\u043B\u0435\u043A\u0442",type:"number",min:0}))),u(E,l({},h({name:"charisma",label:"\u0425\u0430\u0440\u0438\u0437\u043C\u0430",type:"number",min:0}))),u(E,l({},h({name:"constitution",label:"\u0422\u0435\u043B\u043E\u0441\u043B\u043E\u0436\u0435\u043D\u0438\u0435",type:"number",min:1}))),u(E,l({},h({name:"hits",label:"\u0425\u0438\u0442\u044B (\u0417\u0434\u043E\u0440\u043E\u0432\u044C\u0435)",type:"number",min:1}))),u(E,l({},h({name:"skillBonus",label:"\u0411\u043E\u043D\u0443\u0441 \u043C\u0430\u0441\u0442\u0435\u0440\u0441\u0442\u0432\u0430",type:"number"})))]}),c("section",{className:"section",children:[u("h1",{children:"\u041A\u043B\u0430\u0441\u0441\u043E\u0432\u044B\u0435 \u0445\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438"}),u(E,l({},h({name:"savingThrows",label:"\u0421\u043F\u0430\u0441\u0431\u0440\u043E\u0441\u043A\u0438"}))),u(E,l({},h({name:"skills",label:"\u041D\u0430\u0432\u044B\u043A\u0438"}))),u(E,l({},h({name:"equipment",label:"\u0421\u043D\u0430\u0440\u044F\u0436\u0435\u043D\u0438\u0435"}))),u(X4,{spells:t.spells,setCharacter:a}),u(G4,{cantrips:t.cantrips,setCharacter:a})]}),c("section",{className:"section",children:[u("h1",{children:"\u0414\u0440\u0443\u0433\u043E\u0435"}),u(E,l({},h({name:"platinum",label:"\u041F\u043B\u0430\u0442\u0438\u043D\u0430",type:"number",min:0}))),u(E,l({},h({name:"gold",label:"\u0417\u043E\u043B\u043E\u0442\u043E",type:"number",min:0}))),u(E,l({},h({name:"electrum",label:"\u042D\u043B\u0435\u043A\u0442\u0440\u0443\u043C",type:"number",min:0}))),u(E,l({},h({name:"silver",label:"\u0421\u0435\u0440\u0435\u0431\u0440\u043E",type:"number",min:0}))),u(E,l({},h({name:"copper",label:"\u041C\u0435\u0434\u044C",type:"number",min:0}))),u(E,l({},h({name:"experience",label:"\u041E\u043F\u044B\u0442",type:"number",min:0}))),u(E,l({},h({name:"level",label:"\u0423\u0440\u043E\u0432\u0435\u043D\u044C",type:"number",min:1}))),u(E,l({},h({name:"extraHits",label:"\u0414\u043E\u043F.\u0445\u0438\u0442\u044B",type:"number"}))),u(V4,l({},h({name:"comment",label:"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439"})))]}),u("div",{className:"buttons",children:u(v,{type:"submit",disabled:i,children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})})]})},z4=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{width:"100%"},children:u("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})});const V=()=>u(A,{className:"home-page-button",size:"medium",icon:u(z4,{}),as:x,to:"/"}),J4=()=>{const{addCharacter:r}=e4(),e=H();return c("div",{children:[u(V,{}),u(i4,{onSubmit:t=>{const a=l4();t.id=a,r(t),e(`/${t.id}/game`)}})]})},D=r=>{const{label:e,name:n,value:t,onChange:a,min:o}=r;return c("div",{children:[u("label",{htmlFor:n,children:e}),u(I,{name:n,value:t,min:o,onChange:n4({type:"number",onChange:a})})]})},f=r=>{const{className:e,title:n,text:t}=r;return c("div",{className:e,children:[u("h1",{children:n}),u("p",{children:t})]})},S=r=>{const{title:e,value:n}=r,t=K4(n);return c("div",{children:[u("h1",{children:e}),c("div",{children:[u("p",{children:n}),c("p",{children:["(",t>=0?"+":null,t,")"]})]})]})},K4=r=>Math.floor((r-10)/2);const Q4=r=>{const{isChecked:e,onCheck:n}=r;return u("input",{className:"checkbox",type:"checkbox",checked:e,onChange:n})},Y4=r=>{const{spells:e=[],preparedSpells:n=[],onChange:t}=r,a=e.reduce((s,i)=>(s[i.id]=i.name,s),{}),o=s=>{t(s)};return u(N,{children:n.map((s,i)=>u(P,{left:u(Q4,{isChecked:s.used,onCheck:()=>o(i)}),children:s.used?u("p",{children:u("strike",{children:a[s.id]})}):u("p",{children:a[s.id]})},i))})},Z4=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{width:"100%"},children:u("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});const d4=r=>{const{title:e,isOpen:n,onClose:t,children:a}=r;return n?C4.exports.createPortal(u("div",{className:"modal-overlay",onClick:t,children:c("div",{className:"modal",onClick:o=>o.stopPropagation(),children:[c("div",{className:"modal__header",children:[u("h1",{children:e}),u(A,{icon:u(Z4,{}),onClick:t})]}),u("div",{className:"modal__content",children:a})]})}),document.body):null};const W=()=>c("div",{className:"not-found",children:[u("h1",{className:"not-found__header",children:"\u0421\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430"}),u(v,{as:x,to:"/",children:"\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443"})]});const uu=()=>{const r=Z(),{character:e,isLoading:n,dispatch:t}=r4(r.characterId),[a,o]=g.exports.useState(!1);if(n)return u("div",{children:"Loading..."});if(e===void 0)return u(W,{});const s=p=>{t({type:m.UPDATE_COMMENT,comment:p.target.value})},i=p=>{t({type:m.UPDATE_HITS,hits:p})},d=p=>{t({type:m.UPDATE_EXTRA_HITS,extraHits:p})},B=p=>{t({type:m.UPDATE_PLATINUM,platinum:p})},w=p=>{t({type:m.UPDATE_GOLD,gold:p})},q=p=>{t({type:m.UPDATE_ELECTRUM,electrum:p})},h=p=>{t({type:m.UPDATE_SILVER,silver:p})},b=p=>{t({type:m.UPDATE_COPPER,copper:p})},F=p=>{t({type:m.UPDATE_EXPERIENCE,experience:p})},y=p=>{t({type:m.UPDATE_LEVEL,level:p})},$=()=>{t({type:m.RESET_USED})},O=p=>{t({type:m.TOGGLE_USED,spellIndex:p})},z=p=>{t({type:m.ADD_PREPARED,spellId:p})},M=p=>{t({type:m.DELETE_PREPARED,spellIndex:p})},k=p=>e.spells.find(U=>U.id===p).name,T=()=>{o(!1)},p4=()=>{o(!0)};return c("div",{className:"game",children:[u(V,{}),c(d4,{title:"\u0417\u0430\u043A\u043B\u0438\u043D\u0430\u043D\u0438\u044F",isOpen:a,onClose:T,children:[c("div",{children:[u("p",{children:"\u0412\u0441\u0435:"}),u(N,{children:e.spells.map(p=>u(P,{left:u(v,{onClick:()=>z(p.id),children:"+"}),children:p.name},p.id))})]}),c("div",{children:[u("p",{children:"\u041F\u043E\u0434\u0433\u043E\u0442\u043E\u0432\u043B\u0435\u043D\u043D\u044B\u0435:"}),u(N,{children:e.preparedSpells.map((p,U)=>u(P,{left:u(v,{onClick:()=>M(U),children:"-"}),children:k(p.id)},U))})]})]}),c("div",{className:"game__left-column",children:[c("section",{className:"game__character-info game__group",children:[c("div",{className:"game__left-column",children:[u("h1",{className:"game__character-name",children:e.name}),u("h2",{className:"game__character-subinfo",children:e.race}),u("h2",{className:"game__character-subinfo",children:e.class})]}),c("div",{className:"game__right-column",children:[u(f,{title:"\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C",text:e.speed}),u(f,{title:"\u042F\u0437\u044B\u043A\u0438",text:e.languages}),u(f,{title:"\u041F\u0440\u0435\u0434\u044B\u0441\u0442\u043E\u0440\u0438\u044F",text:e.prehistory})]})]}),c("section",{className:"game__character-stats game__group",children:[u(S,{title:"\u0421\u0438\u043B\u0430",value:e.strength}),u(S,{title:"\u041C\u0443\u0434\u0440\u043E\u0441\u0442\u044C",value:e.wisdom}),u(S,{title:"\u041B\u043E\u0432\u043A\u043E\u0441\u0442\u044C",value:e.dexterity}),u(S,{title:"\u0418\u043D\u0442\u0435\u043B\u043B\u0435\u043A\u0442",value:e.intelligence}),u(S,{title:"\u0425\u0430\u0440\u0438\u0437\u043C\u0430",value:e.charisma}),u(S,{title:"\u0422\u0435\u043B\u043E\u0441\u043B\u043E\u0436\u0435\u043D\u0438\u0435",value:e.constitution}),u(f,{className:"game__character-oneline-stat",title:"\u0411\u043E\u043D\u0443\u0441 \u043C\u0430\u0441\u0442\u0435\u0440\u0441\u0442\u0432\u0430",text:`${e.skillBonus>=0?"+":"-"}${e.skillBonus}`}),u(D,{label:"\u0425\u0438\u0442\u044B (\u0417\u0434\u043E\u0440\u043E\u0432\u044C\u0435)",name:"hits",value:e.hits,onChange:i}),u(D,{label:"\u0414\u043E\u043F.\u0445\u0438\u0442\u044B",name:"extraHits",value:e.extraHits,onChange:d})]}),c("section",{className:"game__character-other game__group",children:[u(D,{label:"\u041F\u043B\u0430\u0442\u0438\u043D\u0430",name:"platinum",value:e.platinum,onChange:B}),u(D,{label:"\u0417\u043E\u043B\u043E\u0442\u043E",name:"gold",value:e.gold,onChange:w}),u(D,{label:"\u042D\u043B\u0435\u043A\u0442\u0440\u0443\u043C",name:"electrum",value:e.electrum,onChange:q}),u(D,{label:"\u0421\u0435\u0440\u0435\u0431\u0440\u043E",name:"silver",value:e.silver,onChange:h}),u(D,{label:"\u041C\u0435\u0434\u044C",name:"copper",value:e.copper,onChange:b}),u(D,{label:"\u041E\u043F\u044B\u0442",name:"experience",value:e.experience,onChange:F}),u(D,{label:"\u0423\u0440\u043E\u0432\u0435\u043D\u044C",name:"level",value:e.level,onChange:y}),c("div",{className:"game__comment game__character-oneline-stat",children:[u(X,{htmlFor:"comment",children:"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439"}),u(o4,{name:"comment",value:e.comment,onChange:s})]})]})]}),c("div",{className:"game__right-column",children:[c("section",{children:[u(f,{title:"C\u043F\u0430\u0441\u0431\u0440\u043E\u0441\u043A\u0438",text:e.savingThrows}),e.skills!==""?u(f,{title:"\u041D\u0430\u0432\u044B\u043A\u0438",text:e.skills}):null,e.equipment!==""?u(f,{title:"\u0421\u043D\u0430\u0440\u044F\u0436\u0435\u043D\u0438\u0435",text:e.equipment}):null]}),e.spells.length!==0?c("section",{children:[c("div",{className:"game__character-spells",children:[u("h1",{children:"\u0417\u0430\u043A\u043B\u0438\u043D\u0430\u043D\u0438\u044F"}),u(v,{onClick:p4,children:"\u041F\u043E\u0434\u0433\u043E\u0442\u043E\u0432\u0438\u0442\u044C"}),u(v,{onClick:$,children:"\u0421\u0431\u0440\u043E\u0441"})]}),u(Y4,{spells:e.spells,preparedSpells:e.preparedSpells,onChange:O})]}):null,e.cantrips.length!==0?c("section",{children:[u("h1",{children:"\u0417\u0430\u0433\u043E\u0432\u043E\u0440\u044B"}),u(N,{children:e.cantrips.map(p=>u(P,{children:p},p))})]}):null,u(x,{to:`/${e.id}/update`,children:u(v,{children:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"})})]})]})};const eu=r=>{const{title:e,text:n,submitText:t,cancelText:a,isOpen:o,onClose:s,onSubmit:i,onCancel:d}=r;return u(d4,{title:e,isOpen:o,onClose:s,children:c("div",{className:"submit-modal",children:[u("p",{className:"submit-modal__text",children:n}),c("div",{className:"submit-modal__buttons",children:[u(v,{color:"red",onClick:i,children:t}),u(v,{onClick:d,children:a})]})]})})};const ru=r=>{const{character:e,onDelete:n}=r,[t,a]=g.exports.useState(!1),o=()=>{a(!1)},s=()=>{a(!0)};return c("div",{className:"character-card",children:[u(eu,{title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u0436\u0430",text:`\u0412\u044B \u0442\u043E\u0447\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u0436\u0430 ${e.name}?`,submitText:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",cancelText:"\u041E\u0442\u043C\u0435\u043D\u0430",isOpen:t,onClose:o,onSubmit:n,onCancel:o}),c("div",{className:"character-card__info",children:[u("h1",{className:"character-card__name",children:e.name}),u("p",{className:"character-card__text",children:e.race}),u("p",{className:"character-card__text",children:e.class})]}),c("div",{className:"character-card__buttons",children:[u(v,{className:"character-card__button",as:x,to:`/${e.id}/update`,children:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"}),u(v,{className:"character-card__button",as:x,to:`/${e.id}/game`,children:"\u0418\u0433\u0440\u0430\u0442\u044C"}),u(v,{className:"character-card__button",color:"red",onClick:s,children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"})]})]})},tu=()=>u(x,{to:"/create",className:"character-card",children:u("div",{className:"character-card__plus",children:u(j,{})})});const nu=()=>{const{characters:r,isLoading:e,deleteCharacter:n}=e4();return e?u("div",{children:"Loading..."}):c("div",{className:"home",children:[r.map(t=>u(ru,{character:t,onDelete:()=>n(t.id)},t.id)),u(tu,{})]})},au=()=>{const r=Z(),e=H(),{character:n,isLoading:t,dispatch:a}=r4(r.characterId);return t?u("div",{children:"Loading..."}):n===void 0?u(W,{}):c("div",{children:[u(V,{}),u(i4,{initial:n,onSubmit:s=>{a({type:m.SET,character:s}),e(`/${n.id}/game`)}})]})},su=()=>{const[r]=g4(),e=H();return g.exports.useEffect(()=>{const n=r.get("path");n&&e(n.replace("/DnDr",""))},[]),c(g.exports.Fragment,{children:[u(I4,{children:u("main",{className:"app",children:c(B4,{children:[u(L,{path:"/",element:u(nu,{})}),u(L,{path:"/create",element:u(J4,{})}),u(L,{path:"/:characterId/update",element:u(au,{})}),u(L,{path:"/:characterId/game",element:u(uu,{})}),u(L,{path:"*",element:u(W,{})})]})})}),u("footer",{className:"footer",children:u(b4,{})})]})};F4.render(u(v4,{basename:"/DnDr",children:u(su,{})}),document.getElementById("root"));
